#!/usr/bin/env coffee

should = require 'should'
Webp = require '../../lib'

data = 'iVBORw0KGgoAAAANSUhEUgAAADwAAAA8AQMAAAAAMksxAAAAA1BMVEX/pQDKkkGbAAAAD0lEQVQoz2NgGAWjADsAAAIcAAE79LKOAAAAAElFTkSuQmCC'

webp = new Webp new Buffer data, 'base64'
webp.toBuffer().then (buffer) ->
  buffer.toString('utf8', 0, 4).should.be.equal 'RIFF'
  buffer.toString('utf8', 8, 12).should.be.equal 'WEBP'
  console.log '\nWebP installed correctly'
  process.exit 0
.otherwise (err) ->
  console.log err.stack
  process.exit 1
